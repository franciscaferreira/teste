<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Teste</title>

        <script src="jogo.js">
        
        
        </script>

        <script>
        var x=0;
        var y=0;
        var tiles_livres=[0,1,16,17,32,33,48,49,64,65,80,81,96,97,112,113,6,7,22,23,38,39,52,53];                     
        
            function roda()
            {
              inicializa(carregou,processa);
              carrega_imagem("tiles.png");
              carrega_mapa("fase1.tmx");
              carrega_imagem("p1.png");

            }
            
            function carregou(arqs)
            {
              if(arqs==3)
              pronto();

            }

            function processa()
            { 
              var x_anterior=x;
              var y_anterior=y;
                             
              if(teclado.left)
                 x=x-1;
              else if(teclado.right)
                x=x+1;
                
              if(teclado.up)
                  y=y-1;
              else if(teclado.down)
                  y=y+1;
                  
                  if(x<0) x=0;
                  if(x>19) x=19;
                  if(y<0) y=0;
                  if(y>14) y=14;

              var img=mapa_get_tile(x,y);
               if(tiles_livres.indexOf(img)==-1)
               {
                x=x_anterior;
                y=y_anterior;
                }

                  
              desenha_mapa();
              desenha_imagem("p1.png",x,y);
              

            }
        </script>

    </head>
    

    <body onload="roda()">
      <canvas  id="tela" 
       width="650"
        height="480">
        </canvas>

    </body>
</html>
